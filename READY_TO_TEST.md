# ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ **Docker**: Postgres + Redis –∑–∞–ø—É—â–µ–Ω—ã
2. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ `prisma db push`
   - –¢–∞–±–ª–∏—Ü–∞ `OAuthState` —Å–æ–∑–¥–∞–Ω–∞
   - –ü–æ–ª–µ `nonceUsed` –¥–æ–±–∞–≤–ª–µ–Ω–æ
   - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ `nonce`
3. ‚úÖ **Prisma Client**: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
4. ‚úÖ **Backend**: –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

---

## ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –í–ê–ú

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ADMIN_TWITCH_IDS

**–û—Ç–∫—Ä–æ–π—Ç–µ:** `drops-crypto-api\.env`

**–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:**
```env
ADMIN_TWITCH_IDS=–≤–∞—à_twitch_user_id
```

**–ö–∞–∫ —É–∑–Ω–∞—Ç—å Twitch User ID:**
- –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `get-twitch-user-id.ps1 -Token "–≤–∞—à_—Ç–æ–∫–µ–Ω"`
- –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Prisma Studio: `npx prisma studio` ‚Üí —Ç–∞–±–ª–∏—Ü–∞ `User`
- –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ JWT decoder: https://jwt.io

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend

```powershell
cd C:\Users\Admin\Downloads\drops\drops-crypto-api
npm run start:dev
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 1. API –∑–¥–æ—Ä–æ–≤ ‚úÖ
```
http://localhost:3000/health ‚Üí { "ok": true }
```

### 2. OAuth state —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –û—Ç–∫—Ä–æ–π—Ç–µ `/auth/twitch/start`
- –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ state ‚Üí –æ—à–∏–±–∫–∞ ‚úÖ

### 3. Admin Guard —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí `/admin/claims` ‚Üí 403 ‚úÖ
- –ê–¥–º–∏–Ω (–≤ allowlist) ‚Üí `/admin/claims` ‚Üí 200 ‚úÖ

### 4. SIWE nonce –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π ‚úÖ
- –ü–æ–ª—É—á–∏—Ç—å nonce ‚Üí –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å ‚Üí —É—Å–ø–µ—Ö
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–æ—Ç –∂–µ nonce ‚Üí –æ—à–∏–±–∫–∞ "Nonce already used" ‚úÖ

---

## üöÄ –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç-–ø–ª–∞–Ω

–°–º. `TESTING_CHECKLIST.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ.

---

## ‚úÖ –ò—Ç–æ–≥

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `ADMIN_TWITCH_IDS` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend:**

- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤!** üéâ
