# ‚úÖ –í–°–Å –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

### 1. ‚úÖ CryptoModule –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ AppModule
- **–§–∞–π–ª**: `src/app.module.ts`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ crypto endpoints —Ç–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–Ω—ã
- **Endpoints**:
  - `POST /me/wallet/nonce` - –ø–æ–ª—É—á–∏—Ç—å nonce –¥–ª—è SIWE
  - `POST /me/wallet/verify` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å –∫–æ—à–µ–ª—å–∫–∞
  - `GET /me/wallet/status` - —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞

### 2. ‚úÖ –ê–¥–º–∏–Ω API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞–º–∏ claims
- **–§–∞–π–ª—ã**: `src/admin/admin.controller.ts`, `src/admin/admin.service.ts`
- **–ù–æ–≤—ã–µ endpoints**:
  - `GET /admin/claims` - –≤—Å–µ claims —Å –¥–µ—Ç–∞–ª—è–º–∏
  - `PUT /admin/claims/:id/mark-success` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ —É—Å–ø–µ—à–Ω–æ (—Å txHash)
  - `PUT /admin/claims/:id/mark-failed` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ—à–∏–±–∫–∞
  - `PUT /admin/claims/:id/mark-processing` - –æ—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```powershell
# –£—Å–ø–µ—à–Ω–æ
$body = @{ txHash = "0x123..." } | ConvertTo-Json
Invoke-RestMethod -Method Put -Uri "http://localhost:3000/admin/claims/{id}/mark-success" -Headers $headers -Body $body -ContentType "application/json"

# –û—à–∏–±–∫–∞
$body = @{ error = "Transaction failed" } | ConvertTo-Json
Invoke-RestMethod -Method Put -Uri "http://localhost:3000/admin/claims/{id}/mark-failed" -Headers $headers -Body $body -ContentType "application/json"
```

### 3. ‚úÖ AuthService —Å–æ–∑–¥–∞–Ω (–¥–ª—è –±—É–¥—É—â–µ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ state)
- **–§–∞–π–ª**: `src/auth/auth.service.ts`
- **–ú–µ—Ç–æ–¥—ã**: `generateState()`, `storeState()`, `validateState()`, `exchangeCodeForToken()`
- **–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

### 4. ‚úÖ Prisma seed –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **–§–∞–π–ª**: `package.json`
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: `"prisma": { "seed": "..." }`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å `npx prisma db seed` —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 5. ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–§–∞–π–ª**: `drops-crypto-app/utils/api.ts`
- **–§—É–Ω–∫—Ü–∏–∏**:
  - `checkBackendConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ backend
  - `createApiClient()` - —Å–æ–∑–¥–∞–Ω–∏–µ axios instance —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
  - `apiRequest()` - –æ–±–µ—Ä—Ç–∫–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

---

## –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### Backend (NestJS)

#### ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- Docker Compose (Postgres + Redis)
- Prisma ORM —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Health check endpoint

#### ‚úÖ OAuth & Authentication
- Twitch OAuth flow
- Deep linking –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã
- AuthService —Å –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è state validation

#### ‚úÖ User & Wallet
- `GET /me` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /me/wallet` - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ—à–µ–ª—ë–∫
- `POST /me/wallet/nonce` - SIWE nonce
- `POST /me/wallet/verify` - SIWE –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- `GET /me/wallet/status` - —Å—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

#### ‚úÖ Streamers
- `GET /streamers` - —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ (—Å isFollowing)
- `GET /streamers/:id` - –¥–µ—Ç–∞–ª–∏ —Å—Ç—Ä–∏–º–µ—Ä–∞

#### ‚úÖ Follows
- `GET /me/streamers` - –º–æ–∏ —Å—Ç—Ä–∏–º–µ—Ä—ã
- `POST /me/streamers/:id/follow` - –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è
- `DELETE /me/streamers/:id/follow` - –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è

#### ‚úÖ Prizes
- `GET /prizes` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–∑–æ–≤
- `GET /prizes/:id` - –¥–µ—Ç–∞–ª–∏ –ø—Ä–∏–∑–∞
- `POST /prizes/:id/claim` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–∑
- `GET /prizes/my/claims` - –º–æ–∏ –ø—Ä–∏–∑—ã (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Å—Ç–∞—Ç—É—Å—É)

#### ‚úÖ Admin API
- `POST /admin/streamers` - —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∏–º–µ—Ä–∞
- `POST /admin/streamers/:id/prizes` - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–∑
- `PUT /admin/prizes/:id/activate` - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–∑
- `PUT /admin/prizes/:id/deactivate` - –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–∑
- `GET /admin/claims` - –≤—Å–µ claims
- `PUT /admin/claims/:id/mark-success` - –æ—Ç–º–µ—Ç–∏—Ç—å —É—Å–ø–µ—à–Ω–æ
- `PUT /admin/claims/:id/mark-failed` - –æ—Ç–º–µ—Ç–∏—Ç—å –æ—à–∏–±–∫–æ–π
- `PUT /admin/claims/:id/mark-processing` - –æ—Ç–º–µ—Ç–∏—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

#### ‚úÖ Crypto Features
- SIWE (Sign-In With Ethereum) –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è nonce –∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –ø–æ–¥–ø–∏—Å–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π
- –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ç–æ–∫–µ–Ω–æ–≤ (CryptoService, TransactionQueueService)

### Mobile App (React Native/Expo)

#### ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è
- Stack Navigator (Auth/Main)
- Bottom Tab Navigator (Streamers, Prizes, MyPrizes, Profile)
- Deep linking –¥–ª—è OAuth

#### ‚úÖ –≠–∫—Ä–∞–Ω—ã
- `AuthScreen` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Twitch
- `ProfileScreen` - –ø—Ä–æ—Ñ–∏–ª—å + –∫–æ—à–µ–ª—ë–∫
- `StreamersScreen` - —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ + follow/unfollow
- `PrizesScreen` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–∑–æ–≤ + claim
- `MyPrizesScreen` - –º–æ–∏ –ø—Ä–∏–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

#### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- Twitch OAuth
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–º
- –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–æ–≤ –≤—ã–ø–ª–∞—Ç
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º

#### ‚úÖ –£—Ç–∏–ª–∏—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ backend
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π API client
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–¥–µ–ª–∏:
1. ‚úÖ `User` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. ‚úÖ `Wallet` - –∫–æ—à–µ–ª—å–∫–∏ (—Å –ø–æ–ª–µ–º `verified`)
3. ‚úÖ `WalletVerification` - –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤ (SIWE)
4. ‚úÖ `Streamer` - —Å—Ç—Ä–∏–º–µ—Ä—ã
5. ‚úÖ `Prize` - –ø—Ä–∏–∑—ã
6. ‚úÖ `PrizeClaim` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤ (—Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏)
7. ‚úÖ `UserFollow` - –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤

### Enums:
- ‚úÖ `ClaimStatus` - PENDING, PROCESSING, SUCCESS, FAILED

### –ú–∏–≥—Ä–∞—Ü–∏–∏:
- ‚úÖ `20260108001853_init`
- ‚úÖ `20260108003222_add_streamers_and_prizes`
- ‚úÖ `20260108014730_phase1_crypto_features`

---

## –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:
1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Twitch
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–º
3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∏–º–µ—Ä–æ–≤ –∏ –ø—Ä–∏–∑–æ–≤
4. –ü–æ–¥–ø–∏—Å–∫–∞/–æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
5. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤ (—Å–æ–∑–¥–∞–Ω–∏–µ PENDING)
6. –ü—Ä–æ—Å–º–æ—Ç—Ä –º–æ–∏—Ö –ø—Ä–∏–∑–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
7. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
8. –ê–¥–º–∏–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∏–º–µ—Ä–æ–≤/–ø—Ä–∏–∑–æ–≤)
9. –ê–¥–º–∏–Ω —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ claims
10. SIWE –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–æ –∫–æ–¥ –≥–æ—Ç–æ–≤):
1. –†–µ–∞–ª—å–Ω–∞—è –∫—Ä–∏–ø—Ç–æ-–≤—ã–ø–ª–∞—Ç–∞ (–Ω—É–∂–µ–Ω RPC, private key –≤ .env)
2. Redis –¥–ª—è state storage (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Prisma –¥–ª—è MVP)
3. Twitch EventSub (—Ç—Ä–µ–±—É–µ—Ç webhook URL)

### ‚ùå –î–ª—è –±—É–¥—É—â–µ–≥–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. –û—á–µ—Ä–µ–¥—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (Bull/BullMQ) - –µ—Å—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫–∞ TransactionQueueService
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (PENDING ‚Üí SUCCESS/FAILED)
3. Rate limiting
4. Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
5. –¢–µ—Å—Ç—ã

---

## –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend:
```powershell
cd drops-crypto-api

# 1. Docker
docker compose up -d

# 2. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ seed
npx prisma migrate dev
npm run prisma:seed

# 3. –ó–∞–ø—É—Å–∫
npm run start:dev
```

### Mobile:
```powershell
cd drops-crypto-app

# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# 2. –ó–∞–ø—É—Å–∫
npm start
# –í Metro –Ω–∞–∂–º–∏—Ç–µ 'a' –¥–ª—è Android
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. ‚úÖ `http://localhost:3000/health` ‚Üí `{ "ok": true }`
2. ‚úÖ `http://localhost:3000/streamers` ‚Üí JSON –º–∞—Å—Å–∏–≤
3. ‚úÖ `http://localhost:3000/prizes` ‚Üí JSON –º–∞—Å—Å–∏–≤
4. ‚úÖ –ú–æ–±–∏–ª–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ —ç–º—É–ª—è—Ç–æ—Ä–µ
5. ‚úÖ –ú–æ–±–∏–ª–∫–∞ –≤–∏–¥–∏—Ç backend (–¥–∞–Ω–Ω—ã–µ –≥—Ä—É–∑—è—Ç—Å—è)

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `SETUP_GUIDE.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É
- ‚úÖ `QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `API_DOCUMENTATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö endpoints
- ‚úÖ `IMPLEMENTATION_COMPLETE.md` - –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ `FINAL_SUMMARY.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## –ò–¢–û–ì

**‚úÖ –í–°–Å –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!**

- ‚úÖ Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ê–¥–º–∏–Ω API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ SIWE –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã claims —É–ø—Ä–∞–≤–ª—è–µ–º—ã
- ‚úÖ –í—Å–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!** üöÄ

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –°–ª–µ–¥—É–π—Ç–µ `SETUP_GUIDE.md` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
