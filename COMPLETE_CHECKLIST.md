# ‚úÖ –ü–û–õ–ù–´–ô –ß–ï–ö–õ–ò–°–¢ –í–´–ü–û–õ–ù–ï–ù–ò–Ø

## –®–∞–≥ 1: –ù–∞–π—Ç–∏ twitchUserId ‚úÖ

**–í—ã–ø–æ–ª–Ω–∏—Ç—å:**
```powershell
cd C:\Users\Admin\Downloads\drops\drops-crypto-api
npx prisma studio
```

**–í Prisma Studio:**
- –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É **User**
- –ù–∞–π–¥–∏—Ç–µ `twitchLogin = tiktak6828`
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **twitchUserId**

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç:**
- –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑: `http://localhost:3000/auth/twitch/start`
- –ó–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–∏—Å–∫

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ | twitchUserId = `_____`

---

## –®–∞–≥ 2: –ü—Ä–æ–ø–∏—Å–∞—Ç—å ADMIN_TWITCH_IDS ‚úÖ

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:**
```
C:\Users\Admin\Downloads\drops\drops-crypto-api\.env
```

**–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:**
```env
ADMIN_TWITCH_IDS=–≤–∞—à_twitch_user_id
```

**–ü—Ä–∏–º–µ—Ä:**
```env
ADMIN_TWITCH_IDS=123456789
```

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend ‚úÖ

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω): **Ctrl + C**

**–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
```powershell
cd C:\Users\Admin\Downloads\drops\drops-crypto-api
npm run start:dev
```

**–î–æ–∂–¥–∞—Ç—å—Å—è:** `Nest application successfully started`

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## –®–∞–≥ 4: –ü–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω ‚ö†Ô∏è

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ OAuth**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:3000/auth/twitch/start`
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ deep link –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∂–µ –µ—Å—Ç—å**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π JWT

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –¢–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω: `_____`

---

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Admin Guard ‚úÖ

**–í—ã–ø–æ–ª–Ω–∏—Ç—å:**
```powershell
cd C:\Users\Admin\Downloads\drops\drops-crypto-api
.\test-admin-guard.ps1 -Token "–í–ê–®_JWT_–¢–û–ö–ï–ù"
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ **200 OK** ‚Üí Admin Guard —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **403 Forbidden** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ADMIN_TWITCH_IDS –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –†–µ–∑—É–ª—å—Ç–∞—Ç: `_____` (200/403)

---

## –®–∞–≥ 6: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π claim ‚úÖ

**–í—ã–ø–æ–ª–Ω–∏—Ç—å:**
```powershell
cd C:\Users\Admin\Downloads\drops\drops-crypto-api
.\create-test-claim.ps1 -Token "–í–ê–®_JWT_–¢–û–ö–ï–ù"
```

**–ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∏–∑–æ–≤:**
```powershell
npm run prisma:seed
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- Claim —Å–æ–∑–¥–∞–Ω
- ClaimId –ø–æ–∫–∞–∑–∞–Ω

**–°—Ç–∞—Ç—É—Å:** [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–æ | ClaimId = `_____`

---

## üéØ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –Ω–∞–ø–∏—à–∏—Ç–µ:**

```
–ù–∞—à—ë–ª twitchUserId, –ø—Ä–æ–ø–∏—Å–∞–ª ADMIN_TWITCH_IDS, admin-guard = 200, claim —Å–æ–∑–¥–∞–Ω (claimId=...)
```

**–ò–ª–∏ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- –®–∞–≥, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å: `_____`
- –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏: `_____`

---

## üìã –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env
```powershell
Get-Content drops-crypto-api\.env | Select-String "ADMIN_TWITCH_IDS"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backend
```
http://localhost:3000/health ‚Üí { "ok": true }
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Admin Guard
```powershell
.\test-admin-guard.ps1 -Token "–≤–∞—à_—Ç–æ–∫–µ–Ω"
```

---

**–í—ã–ø–æ–ª–Ω—è–π—Ç–µ —à–∞–≥–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ –æ—Ç–º–µ—á–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å!** ‚úÖ
